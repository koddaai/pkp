import{_ as s,o as t,c as e,ag as i}from"./chunks/framework.DEqXEGcv.js";const k=JSON.parse('{"title":"Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"guide/architecture.md","filePath":"guide/architecture.md"}'),n={name:"guide/architecture.md"};function l(p,a,r,o,d,c){return t(),e("div",null,[...a[0]||(a[0]=[i(`<h1 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h1><p>PKP is designed as a three-layer architecture for maximum flexibility and decentralization.</p><h2 id="layer-0-static-files" tabindex="-1">Layer 0: Static Files <a class="header-anchor" href="#layer-0-static-files" aria-label="Permalink to &quot;Layer 0: Static Files&quot;">​</a></h2><p>The foundation of PKP is static files hosted on vendor domains.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/</span></span>
<span class="line"><span>├── pkp.txt                           # Optional: discovery pointer</span></span>
<span class="line"><span>└── .well-known/</span></span>
<span class="line"><span>    └── pkp/</span></span>
<span class="line"><span>        ├── catalog.json              # Product index (L0)</span></span>
<span class="line"><span>        └── products/</span></span>
<span class="line"><span>            ├── product-a.md          # PRODUCT.md files</span></span>
<span class="line"><span>            └── product-b.md</span></span></code></pre></div><h3 id="benefits" tabindex="-1">Benefits <a class="header-anchor" href="#benefits" aria-label="Permalink to &quot;Benefits&quot;">​</a></h3><ul><li><strong>Zero cost</strong>: Just static files</li><li><strong>Decentralized</strong>: Data stays on vendor domains</li><li><strong>Cacheable</strong>: Works with CDNs</li><li><strong>No vendor lock-in</strong>: Standard HTTP</li></ul><h3 id="catalog-json" tabindex="-1">catalog.json <a class="header-anchor" href="#catalog-json" aria-label="Permalink to &quot;catalog.json&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;schema&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pkp-catalog/1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Example Store&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Quality products&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;updated_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-01-15T10:00:00Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;products&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;sku&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;product-a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Product A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;category&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;notebooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;products/product-a.md&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="layer-1-catalog-mcp-server" tabindex="-1">Layer 1: Catalog MCP Server <a class="header-anchor" href="#layer-1-catalog-mcp-server" aria-label="Permalink to &quot;Layer 1: Catalog MCP Server&quot;">​</a></h2><p>For AI agents that need to interact with a single catalog.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pkp-catalog-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./dist</span></span></code></pre></div><h3 id="tools-available" tabindex="-1">Tools Available <a class="header-anchor" href="#tools-available" aria-label="Permalink to &quot;Tools Available&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Tool</th><th>Description</th></tr></thead><tbody><tr><td><code>search_products</code></td><td>Search with filters</td></tr><tr><td><code>get_product</code></td><td>Get product details</td></tr><tr><td><code>compare_products</code></td><td>Compare 2-5 products</td></tr><tr><td><code>list_categories</code></td><td>List all categories</td></tr><tr><td><code>get_product_faq</code></td><td>Get product FAQ</td></tr><tr><td><code>get_alternatives</code></td><td>Find similar products</td></tr></tbody></table><h3 id="mcp-resources" tabindex="-1">MCP Resources <a class="header-anchor" href="#mcp-resources" aria-label="Permalink to &quot;MCP Resources&quot;">​</a></h3><ul><li><code>pkp://catalog</code> - Catalog metadata</li><li><code>pkp://product/{sku}</code> - Product content</li></ul><h2 id="layer-2-registry-mcp-server" tabindex="-1">Layer 2: Registry MCP Server <a class="header-anchor" href="#layer-2-registry-mcp-server" aria-label="Permalink to &quot;Layer 2: Registry MCP Server&quot;">​</a></h2><p>For AI agents that need cross-catalog product discovery.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start registry</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pkp-registry-server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --domain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry.example.com</span></span></code></pre></div><h3 id="tools-available-1" tabindex="-1">Tools Available <a class="header-anchor" href="#tools-available-1" aria-label="Permalink to &quot;Tools Available&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Tool</th><th>Description</th></tr></thead><tbody><tr><td><code>search_products</code></td><td>Global search across catalogs</td></tr><tr><td><code>resolve_product</code></td><td>Resolve <code>pkp://domain/sku</code> URI</td></tr><tr><td><code>register_catalog</code></td><td>Add catalog to registry</td></tr><tr><td><code>compare_across_catalogs</code></td><td>Compare products from different catalogs</td></tr><tr><td><code>list_catalogs</code></td><td>List registered catalogs</td></tr></tbody></table><h3 id="product-uris" tabindex="-1">Product URIs <a class="header-anchor" href="#product-uris" aria-label="Permalink to &quot;Product URIs&quot;">​</a></h3><p>Products can be referenced globally using PKP URIs:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pkp://example.com/iphone-16-pro</span></span>
<span class="line"><span>pkp://store.example.com/galaxy-s25-ultra</span></span></code></pre></div><h2 id="data-flow" tabindex="-1">Data Flow <a class="header-anchor" href="#data-flow" aria-label="Permalink to &quot;Data Flow&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────┐</span></span>
<span class="line"><span>│   AI Agent      │</span></span>
<span class="line"><span>│  (Claude, etc)  │</span></span>
<span class="line"><span>└────────┬────────┘</span></span>
<span class="line"><span>         │ MCP Protocol</span></span>
<span class="line"><span>         ▼</span></span>
<span class="line"><span>┌─────────────────┐     ┌─────────────────┐</span></span>
<span class="line"><span>│ Registry Server │────▶│ Catalog Server  │</span></span>
<span class="line"><span>│    (Layer 2)    │     │    (Layer 1)    │</span></span>
<span class="line"><span>└────────┬────────┘     └────────┬────────┘</span></span>
<span class="line"><span>         │                       │</span></span>
<span class="line"><span>         ▼                       ▼</span></span>
<span class="line"><span>┌─────────────────┐     ┌─────────────────┐</span></span>
<span class="line"><span>│  catalog.json   │     │  PRODUCT.md     │</span></span>
<span class="line"><span>│    (Layer 0)    │     │    (Layer 0)    │</span></span>
<span class="line"><span>└─────────────────┘     └─────────────────┘</span></span></code></pre></div><h2 id="confidence-trust" tabindex="-1">Confidence &amp; Trust <a class="header-anchor" href="#confidence-trust" aria-label="Permalink to &quot;Confidence &amp; Trust&quot;">​</a></h2><p>Each data source has an associated trust level:</p><table tabindex="0"><thead><tr><th>Level</th><th>Source</th><th>Trust</th></tr></thead><tbody><tr><td>1</td><td><code>manufacturer</code></td><td>Highest</td></tr><tr><td>2</td><td><code>retailer-feed</code></td><td>High</td></tr><tr><td>3</td><td><code>community</code></td><td>Medium</td></tr><tr><td>4</td><td><code>ai-generated</code></td><td>Low</td></tr><tr><td>5</td><td><code>scraped</code></td><td>Lowest</td></tr></tbody></table><p>When conflicts occur, higher trust sources take precedence.</p>`,30)])])}const u=s(n,[["render",l]]);export{k as __pageData,u as default};
